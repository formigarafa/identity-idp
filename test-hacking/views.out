
Randomized with seed 25442

account_reset/request/show.html.erb
  has button to delete
  has a localized title

users/delete/show.html.erb
  contains link to cancel delete account link
  displays bullets
  contains link to delete account button
  displays bullets for loa1
  displays headings
  displays bullets for loa1

users/piv_cac_authentication_setup/new.html.erb
  user is setting up 2FA
    renders a link to choose a different option
  user has sufficient factors
    renders a link to cancel and go back to the account page

account_reset/cancel/show.html.erb
  has button to cancel request
  has a localized title

user_mailer/email_confirmation_instructions.html.erb
  includes a link to confirmation
  mentions creating an account when user is not yet confirmed
  mentions updating an account when user has already been confirmed
  mentions how long the user has to confirm
  in a non-default locale
    puts the locale in the URL

idv/shared/_error.html.erb
  renders heading
  title
    with title
      sets title
    without title
      sets title as defaulting to heading
  type
    warning
      shows an appropriate troubleshooting heading
      includes informative image
    absent
      defaults to error
    error
      shows an appropriate troubleshooting heading
      includes informative image
  secondary action
    with secondary action
      renders secondary action button
    with form action
      renders action button
    without secondary action
      does not render secondary action button
  options
    with options
      renders a list of troubleshooting options
    no options
      does not render troubleshooting options
  action
    with action
      renders action button
    with form action
      renders action button
    without action
      does not render action button

users/totp_setup/new.html.erb
  user has sufficient factors enabled
    renders the QR code
    renders a link to cancel and go back to the account page
    has labelled fields
    has a button to copy the QR code
    renders the QR code image with useful alt text
  user is setting up 2FA
    renders a link to choose a different option

idv/doc_auth/welcome.html.erb
  phone vendor outage
    renders alert banner
  during the acuant maintenance window
    renders the warning banner but no other content
  in recovery without an authenticated user
    renders a link to return to the MFA step
  without service provider
    renders troubleshooting options
  with service provider
    renders troubleshooting options
  in doc auth with an authenticated user
    does not render the IRS reproofing explanation
    renders a link to return to the SP
    when trying to log in to the IRS
      renders the IRS reproofing explanation

idv/session_errors/failure.html.erb
  includes a message instructing when they can try again
  renders a list of troubleshooting options

idv/otp_delivery_method/new.html.erb
  renders sms and voice options
  gpo letter available
    renders troubleshooting options
  phone vendor outage
    renders alert banner
    disables problematic vendor option
  without voice support
    renders sms option
  gpo letter not available
    renders troubleshooting options
  without sms support
    renders voice option

layouts/application.html.erb
  current_user is present but is not fully authenticated
    does not render the DAP analytics
  user is fully authenticated
    does not render the DAP analytics
  no content for nav present
    displays only the logo
  session expiration
    renders a javascript page refresh
    with skip_session_expiration
      does not render a javascript page refresh
  when FeatureManagement.show_demo_banner? is true
    displays the demo banner
  when FeatureManagement.show_no_pii_banner? is true
    displays the no PII banner
  user is not authenticated and is not on page with trust
    displays the DAP analytics
  when FeatureManagement.show_demo_banner? is false
    does not display the demo banner
  when new relic browser key and app id are present
    it render the new relic javascript
  when new relic browser key and app id are not present
    it does not render the new relic javascript
  <title>
    with a page title added
      properly works with > in the title tag
      does not double-escape HTML in the title tag
    without a page title added
      should only have Login.gov as title
  when FeatureManagement.show_no_pii_banner? is false
    does not display the no PII banner

account_reset/confirm_request/show.html.erb
  has a localized title

sign_up/registrations/new.html.erb
  has a localized header
  sets form autocomplete to off
  includes a link to security / privacy page and privacy statement act
  has a cancel link that points to the decorated_session cancel_link_url
  has a localized title
  sets input autocorrect to off

idv/session_errors/throttled.html.erb
  with liveness feature disabled
    renders expected heading
  with an SP
    renders a list of troubleshooting options
  with liveness feature enabled
    renders expected heading
  without an SP
    renders a list of troubleshooting options

devise/shared/_password_strength.html.erb
  forbidden attributes
    when local is unassigned
      omits data-forbidden attribute from strength text tag
    when local is assigned
      adds JSON-encoded data-forbidden to strength text tag
    when local is nil
      omits data-forbidden attribute from strength text tag

vendor_outage/show.html.erb
  does not render gpo option
  gpo option shown
    renders gpo option

idv/phone_errors/failure.html.erb
  includes a message instructing when they can try again
  renders a list of troubleshooting options

shared/_one_time_code_input.html.erb
  aria attributes
    merges aria attributes
  maxlength
    no maxlength given
      renders input maxlength DIRECT_OTP_LENGTH
    maxlength given
      renders input given maxlength
  name
    no name given
      renders default name "code"
    name given
      renders given name
  classes
    with custom classes
      renders with additional custom classes
    without custom classes given
      renders with default classes
  numeric
    no numeric given
      renders input mode "numeric"
    numeric is false
      renders input mode "text"
  data attributes
    merges data attributes
  transport
    explicitly nil
      renders without transport
    given
      renders given transport
    omitted
      renders default sms transport

idv/phone_errors/jobfail.html.erb
  shows contact support option
  shows warning text
  shows a primary action
  gpo verification disabled
    renders a list of troubleshooting options
  gpo verification enabled
    renders a list of troubleshooting options

users/phone_setup/index.html.erb
  renders a link to choose a different option
  sets form autocomplete to off
  phone vendor outage
    renders alert banner
  voip numbers
    when voip numbers are allowed
      does not mention voip
    when voip numbers are blocked
      tells users to not use VOIP numbers

idv/inherited_proofing/agreement.html.erb
  renders the Continue button
  renders the Cancel link
  with or without service provider
    renders content

users/edit_phone/_remove_phone.html.erb
  when there are only 2 phone configurations
    renders a delete phone button
  when there is only 1 phone configuration
    renders a delete phone button
  when there is 1 phone configuration and 1 other configuration
    renders a delete phone button

idv/doc_auth/_back.html.erb
  with back path
    renders with back path
  no back path
    renders nothing
  with step URL in instance variable
    with step
      renders
      behaves like back link with class
        renders with class
    with action
      renders
      behaves like back link with class
        renders with class
  with fallback link
    renders
    behaves like back link with class
      renders with class
  with step URL in locals
    with step
      renders
      behaves like back link with class
        renders with class
    with action
      renders
      behaves like back link with class
        renders with class

idv/phone_errors/warning.html.erb
  shows a primary action
  shows warning text
  shows remaining attempts
  gpo verification enabled
    renders a list of troubleshooting options
  gpo verification disabled
    renders a list of troubleshooting options

idv/phone_errors/_warning.html.erb
  renders block text
  renders link to try again
  renders heading
  contact_support_option
    with contact support option
      renders a list of troubleshooting options
    without contact support option
      renders a list of troubleshooting options
  without an SP
    renders a list of troubleshooting options
  with an SP
    renders a list of troubleshooting options
    with a name
      renders failure to proof url with name as location
    without a name
      renders failure to proof url with default location

idv/activated.html.erb
  has a localized heading
  has a localized title

users/passwords/edit.html.erb
  sets form autocomplete to off
  contains minimum password length requirements
  has a localized title
  has a localized heading

shared/_footer_lite.html.erb
  user is signed out
    contains link to contact page
    contains GSA text
    contains link to help page
    contains link to privacy page

shared/_email_languages.html.erb
  marks the current locale as the default
  renders a checkbox per available locale
  with a nil selection
    marks the default language as checked
  in french
    marks the current locale as the default
  with a language selection
    marks the selection language as checked

accounts/_nav_auth.html.erb
  mobile nav is enabled
    contains menu button
  user is signed in
    contains sign out link
    does not contain link to cancel the auth process
    contains welcome message

devise/sessions/new.html.erb
  includes a link to create a new account
  includes a link to log in
  has a localized title
  sets input autocorrect to off
  includes a link to security / privacy page and privacy statement act
  sets autocomplete attribute off
  during the acuant maintenance window
    renders the warning banner and the normal form
  when SP is present
    displays a custom header
    displays a back to sp link
    has sp alert for certain service providers
    service provider does not have custom help text
      does not have an sp alert for service providers without alert messages
  when SP is not present
    does not display the branded content

users/shared/_otp_delivery_preference_selection.html.erb
  renders enabled sms option
  renders enabled voice option
  sms vendor outage
    renders disabled sms option
  voice vendor outage
    renders disabled voice option

two_factor_authentication/sms_opt_in/error.html.erb
  renders the masked phone number
  troubleshooting links
    links to the contact form in a new window
    with an other_mfa_options_url
      links to other options
    without an other_mfa_options_url
      omits the other auth methods section

two_factor_authentication/sms_opt_in/new.html.erb
  renders the masked phone number
  other authentication methods
    without an other_mfa_options_url
      omits the other auth methods section
    with an other_mfa_options_url
      links to other options

users/webauthn_setup/new.html.erb
  webauthn platform
    displays warning alert

idv/cancellations/new.html.erb
  renders action to start over
  renders action to keep going
  renders action to exit and go to account page
  with step parameter
    forwards step to confirmation link
  with associated sp
    renders action to exit and return to SP
  with hybrid flow
    renders content
    renders heading

users/backup_code_setup/reminder.html.erb
  has a regenerate backup code link
  has a localized heading
  has a localized title
  has a cancel link to account path
  has localized body info

devise/passwords/new.html.erb
  has a cancel link that points to the decorated_session cancel_link_url
  sets input autocorrect to off
  has sp alert for certain service providers
  has a localized title
  has a localized header
  sets form autocomplete to off
  service provider does not have custom help text
    does not have an sp alert for service providers without alert messages

devise/passwords/edit.html.erb
  has a localized title
  sets form autocomplete to off
  has a localized header
  has information about the password key

sign_up/email_resend/new.html.erb
  has a localized title
  has a localized header

idv/in_person/ready_to_verify/show.html.erb
  with enrollment where current address matches id
    renders without proof of address instructions
  with enrollment where selected_location_details is not present
    does not render a location
  with enrollment where current address does not match id
    renders with proof of address instructions
  with enrollment where selected_location_details is present
    renders a location

idv/setup_errors/show.html.erb
  includes a message instructing them to fill out a contact form
  shows step indicator with pending status on secure account

account_reset/delete_account/show.html.erb
  has a localized title
  has button to delete

idv/doc_auth/upload.html.erb
  renders the headings and info

shared/_masked_text.html.erb
  renders texts
  without toggle
    does not render with toggle
  with toggle
    renders with toggle
    with custom id
      renders with custom id

shared/_nav_lite.html.erb
  user is signed out
    does not contain sign out link

two_factor_authentication/otp_verification/show.html.erb
  user has a phone
    allow user to return to two factor options screen
    when choosing to receive OTP via SMS
      allows user to resend code using the same delivery method
      has a link to choose a different 2FA method
    when users phone number is unconfirmed
      has a link to choose a new phone number
    when totp is enabled
      allows user to sign in using an authenticator app
    user is reauthenticating
      renders the reauthn partial
      provides a cancel link to return to profile
    user is changing phone number
      provides a cancel link to return to profile
    user signed up
      provides an option to use a personal key
    when @code_value is set
      pre-populates the form field
    OTP copy
      informs the user that an OTP has been sent to their number via #help_text
      in other locales
        translates correctly
    when choosing to receive OTP via voice
      has a fallback link to send confirmation as SMS
      allows user to resend code using the same delivery method
    when users phone number is unconfirmed
      has a link to choose a new phone number
    common OTP delivery screen behavior
      has a localized heading
      has a localized title

accounts/connected_accounts/show.html.erb
  contains connected applications
  with a connected app that is an invalid service provider
    renders

idv/shared/_ssn.html.erb
  threatmetrix collection disabled
    does not render <noscript> tag
    does not render <script> tag
  when threatmetrix collection enabled
    and org id specified
      and entering ssn for the first time
        session id not specified
          does not render <noscript> tag
          does not render <script> tag
        <script> tag
          is rendered
        <noscript> tag
          is rendered
    org id not specified
      does not render <script> tag
      does not render <noscript> tag

idv/session_errors/exception.html.erb
  renders a list of troubleshooting options
  shows a primary action
  with associated service provider
    renders a list of troubleshooting options

account_reset/confirm_delete_account/show.html.erb
  has a localized title
  contains link to create a new account
  contains the user email

reactivate_account/index.html.erb
  displays a fallback warning alert when js is off

accounts/history/show.html.erb
  contains account history

shared/_maintenance_window_alert.html.erb
  during the maintenance window
    renders a warning and not the contents of the block
  outside the maintenance window
    renders the contents of the block but no warning

two_factor_authentication/totp_verification/show.html.erb
  shows the correct header
  shows the correct help text
  allows the user to fallback to SMS and voice
  uses numeric input mode (to allow leading zeroes)
  provides an option to use a personal key
  behaves like an otp form
    tertiary form actions
      allows the user to cancel out of the sign in process
  user is reauthenticating
    provides a cancel link to return to profile
    renders the reauthn partial

sign_up/passwords/new.html.erb
  renders the proper help text
  renders the correct heading
  renders the proper Password label
  includes a form to cancel account creation

shared/_nav_branded.html.erb
  without a SP-logo configured
    displayes the generic SP logo
  with a S3 SP-logo configured
    renders the logo from S3
  with a SP-logo configured
    displays the SP logo

idv/session_errors/warning.html.erb
  shows a primary action
  does not display troubleshooting options
  shows remaining attempts
  with an associated service provider
    renders troubleshooting option to get help at service provider
  with a nil user_session
    does not render troubleshooting option to retake photos
  with a flow session which had a barcode attention document capture result
    renders troubleshooting option to retake photos

shared/_troubleshooting_options.html.erb
  heading_tag
    given
      renders with custom heading_tag
    omitted
      renders with default heading_tag h2
  options
    without custom class
      renders default css class
    with custom class
      renders with default and custom css classes
  heading
    renders heading text
  options
    without any options
      does not render anything
    with options
      renders options as links

account_reset/recovery_options/show.html.erb
  has button to cancel request
  has a localized title

mfa_confirmation/show.html.erb
  provides a context for adding another MFA method
  has a localized title
  provides a call to action to add another MFA method
  has a heading

two_factor_authentication/personal_key_verification/show.html.erb
  prompts the user to enter their personal key
  contains a form to submit the personal key
  has a localized heading
  has a localized title
  behaves like an otp form
    tertiary form actions
      allows the user to cancel out of the sign in process

accounts/two_factor_authentication/show.html.erb
  user is not TOTP enabled
    contains link to enable TOTP
  when multiple mfa is enabled
    disables delete buttons for the last non restricted mfa method with phone configured
  when the user does not have password_reset_profile
    contains a personal key section
  when user is TOTP enabled
    contains link to disable TOTP
  when current user has password_reset_profile
    lacks a personal key section

forgot_password/show.html.erb
  has a localized header
  contains a link to create a new account
  contains link to resend the password reset email
  has a localized title
  displays a notice if resend_confirmation is present
  provides an explanation to the user

accounts/show.html.erb
  has a localized title
  when a profile has just been re-activated with personal key during SP auth
    renders the link to continue to the SP
  when current user has password_reset_profile
    displays an alert with instructions to reactivate their profile
    contains link to reactivate profile via personal key or reverification
  auth app listing and adding
    user has an auth app
      renders the auth app section
    user has no auth app
      does not render auth app
  email listing and adding
    shows one email if the user has only one email
    shows one email if the user has only one email
    renders the email section
  phone listing and adding
    user has a phone
      renders the phone section
      formats phone numbers
    user has no phone
      does not render phone
  when the user does not have pending_profile
    lacks a pending profile section
  PIV/CAC listing and adding
    user has a piv/cac
      renders the piv/cac section
    user has no piv/cac
      does not render piv/cac
  when current user has pending_profile
    contains a link to activate profile

partials/multi_factor_authentication/_mfa_selection.html.erb
  before selecting options
    renders a field with mfa-selection class
    does not display any errors
  user already setup an mfa configuration and is returning to create a second
    shows a disabled checkbox for the configuration already created
    shows a checked checkbox for the configuration already created
    the checkbox for the configuration created communicates it is already created

idv/phone/new.html.erb
  gpo letter available
    renders troubleshooting options
  gpo letter not available
    renders troubleshooting options

users/phones/add.html.erb
  phone vendor outage
    renders alert banner

layouts/user_mailer.html.erb
  includes alt text for app logo that reads Login.gov logo
  includes the support text and link
  includes the message subject as the title
  includes the message subject in the body
  includes link to the privacy policy
  includes the app logo
  includes link to About Login.gov
  includes a request to not reply to this messsage

idv/phone_errors/timeout.html.erb
  shows warning text
  shows contact support option
  shows a primary action
  gpo verification enabled
    renders a list of troubleshooting options
  gpo verification disabled
    renders a list of troubleshooting options

shared/_personal_key.html.erb
  download link
    has the download attribute and a data: url for the personal key

sign_up/completions/show.html.erb
  shows the app name, not the agency name
  the all_emails scope is requested
    renders all of the user email addresses
  ial2
    masks the SSN
  MFA CTA banner
    with multiple factors disabled
      with multiple MFA feature flag enabled
        shows a banner if the user selects one MFA option
      with multiple MFA feature flag disabled
        does not show a banner
    with multiple factors enabled
      with multiple MFA feature flag enabled
        does not show a banner
      with multiple MFA feature flag disabled
        does not show a banner

partials/personal_key/_key.html.erb
  renders the code without whitespace between segments

shared/_address.html.erb
  without an address2
    renders 1 fewer line break
  an address
    renders all the fields of the address

shared/_banner.html.erb
  properly HTML escapes the secure notification

idv/come_back_later/show.html.erb
  shows step indicator with current step
  without an SP
    renders a return to account button
    renders return to account message
  with an SP
    renders a return to SP button
    renders return to SP message

idv/shared/_document_capture.html.erb
  async upload urls
    when async upload are enabled
      does modifies CSP connect_src headers to include upload urls
    when async upload is disabled
      does not modify CSP connect_src headers
  in person url
    when in person proofing is disabled
      initializes without in person url
    when in person proofing is enabled
      initializes with in person url
      with an associated service provider
        initializes without in person url
        when in person proofing is enabled for issuer
          initializes with in person url

idv/gpo/index.html.erb
  renders fallback link to return to phone verify path
  prompts to send letter
  has page to go back to
    renders back link to return to previous path
  letter already sent
    prompts to send another letter
  user needs address otp verification
    renders fallback link to return to verify path

idv/doc_auth/_cancel.html.erb
  renders cancel link
  with step local
    creates links with step parameter

users/backup_code_setup/create.html.erb
  displays download link with plain text content equal to the users backup codes

two_factor_authentication/options/index.html.erb
  has a cancel link
  has a localized title
  has a localized heading
  phone vendor outage
    renders alert banner
    disables problematic vendor option

user_mailer/unconfirmed_email_instructions.html.erb
  states that the email is not associated with a user account
  includes a link to create another account with the email address
  mentions how long the user has to confirm
  in a non-default locale
    puts the locale in the account creation URL

idv/inherited_proofing/get_started.html.erb
  renders the Continue button
  renders the Cancel link
  with or without service provider
    renders troubleshooting options

idv/inherited_proofing/verify_wait.html.erb
  renders

idv/review/new.html.erb
  user has completed all steps
    renders the correct content heading
    renders all steps
    renders the correct header for the accordion
    contains an accordion with verified user information
    shows the step indicator
    with an american-style dob
      renders correctly

idv/cancellations/destroy.html.erb
  renders heading
  renders content

users/two_factor_authentication_setup/index.html.erb
  all phone vendor outage
    renders alert banner
    disables phone option
  single phone vendor outage
    does not render alert banner
    does not disable phone option

sign_up/emails/show.html.erb
  contains link to resend confirmation page
  has a localized title
  has a localized header

Top 10 slowest examples (6.29 seconds, 12.6% of total time):
  accounts/two_factor_authentication/show.html.erb when the user does not have password_reset_profile contains a personal key section
    0.94593 seconds ./spec/views/accounts/two_factor_authentication/show.html.erb_spec.rb:58
  accounts/show.html.erb PIV/CAC listing and adding user has a piv/cac renders the piv/cac section
    0.75186 seconds ./spec/views/accounts/show.html.erb_spec.rb:135
  accounts/show.html.erb phone listing and adding user has a phone formats phone numbers
    0.71212 seconds ./spec/views/accounts/show.html.erb_spec.rb:94
  accounts/show.html.erb when the user does not have pending_profile lacks a pending profile section
    0.69692 seconds ./spec/views/accounts/show.html.erb_spec.rb:52
  accounts/show.html.erb phone listing and adding user has a phone renders the phone section
    0.57044 seconds ./spec/views/accounts/show.html.erb_spec.rb:88
  accounts/two_factor_authentication/show.html.erb user is not TOTP enabled contains link to enable TOTP
    0.55662 seconds ./spec/views/accounts/two_factor_authentication/show.html.erb_spec.rb:21
  accounts/show.html.erb when current user has password_reset_profile contains link to reactivate profile via personal key or reverification
    0.53479 seconds ./spec/views/accounts/show.html.erb_spec.rb:37
  accounts/show.html.erb has a localized title
    0.51913 seconds ./spec/views/accounts/show.html.erb_spec.rb:20
  accounts/show.html.erb when a profile has just been re-activated with personal key during SP auth renders the link to continue to the SP
    0.51494 seconds ./spec/views/accounts/show.html.erb_spec.rb:179
  two_factor_authentication/totp_verification/show.html.erb provides an option to use a personal key
    0.48886 seconds ./spec/views/two_factor_authentication/totp_verification/show.html.erb_spec.rb:48

Top 10 slowest example groups:
  accounts/two_factor_authentication/show.html.erb
    0.54475 seconds average (2.72 seconds / 5 examples) ./spec/views/accounts/two_factor_authentication/show.html.erb_spec.rb:3
  users/backup_code_setup/create.html.erb
    0.47304 seconds average (0.47304 seconds / 1 example) ./spec/views/users/backup_code_setup/create.html.erb_spec.rb:4
  accounts/show.html.erb
    0.45767 seconds average (7.32 seconds / 16 examples) ./spec/views/accounts/show.html.erb_spec.rb:3
  two_factor_authentication/totp_verification/show.html.erb
    0.27989 seconds average (2.24 seconds / 8 examples) ./spec/views/two_factor_authentication/totp_verification/show.html.erb_spec.rb:3
  accounts/history/show.html.erb
    0.26757 seconds average (0.26757 seconds / 1 example) ./spec/views/accounts/history/show.html.erb_spec.rb:3
  account_reset/request/show.html.erb
    0.25985 seconds average (0.51969 seconds / 2 examples) ./spec/views/account_reset/request/show.html.erb_spec.rb:3
  sign_up/completions/show.html.erb
    0.25252 seconds average (1.77 seconds / 7 examples) ./spec/views/sign_up/completions/show.html.erb_spec.rb:3
  shared/_nav_branded.html.erb
    0.24938 seconds average (0.74814 seconds / 3 examples) ./spec/views/shared/_nav_branded.html.erb_spec.rb:3
  mfa_confirmation/show.html.erb
    0.24139 seconds average (0.96557 seconds / 4 examples) ./spec/views/mfa_confirmation/show.html.erb_spec.rb:3
  two_factor_authentication/personal_key_verification/show.html.erb
    0.20943 seconds average (1.05 seconds / 5 examples) ./spec/views/two_factor_authentication/personal_key_verification/show.html.erb_spec.rb:3

Finished in 50.01 seconds (files took 2.87 seconds to load)
409 examples, 0 failures

Randomized with seed 25442

Coverage report generated for RSpec to /home/jmax/projects/identity-idp/coverage. 5918 / 32014 LOC (18.49%) covered.


Randomized with seed 54538

ScriptHelper
  #javascript_include_tag_without_preload
    avoids modifying headers
  #render_javascript_pack_once_tags
    script that does not exist
      gracefully outputs nothing
    scripts enqueued
      prints script sources
      prints asset paths sources
      with script integrity available
        adds integrity attribute
      with configured asset host
        uses asset_host for non-same-origin assets and domain_name for same-origin assets
      local development crossorigin sources
        prints script sources with crossorigin attribute
        empty webpack port
          renders as if webpack port was unassigned
    with named scripts argument
      enqueues those scripts before printing them
    no scripts enqueued
      is nil
  #javascript_packs_tag_once
    returns nil

LocaleHelper
  #with_user_locale
    when the user has no email_language
      yields the block and does not change the locale
    when the user has an invalid email_language
      yields the block and does not change the locale
      warns about a bad email_language
    when the user has an email_language
      sets the language inside the block and yields
  #locale_url_param
    in French (a non-default locale)
      is that locale
    in Spanish (a non-default locale)
      is that locale
    in the default locale
      is nil

AwsS3Helper
  #s3_presigned_url
    requires a bucket_prefix
    requires a keyname
    is created with an expiration
    returns a URL
  #s3_resource
    AWS credentials are not set
      returns nil
  #presigned_url_expiration_in_seconds
    returns a number

GoBackHelper
  #go_back_path
    no referer
      is nil
    referer from different domain
      is nil
    referer is invalid scheme
      is nil
    referer from same domain
      is path from referer
  #extract_path_and_query_from_uri
    preserves query parameter and path from uri
  #app_host
    with port
      returns host
    without port
      returns host

SessionTimeoutWarningHelper
  #expires_at
    returns time before now
    with session expiration
      returns time remaining in user session
  #timeout_refresh_path
    with a malicious host value
      does not blow up
    with an invalid URI
      does not blow up
    with no params in the request url
      adds timeout=true params
    with timeout=true and request_id=123 \
            in the query params already
      is the same
    with params in the request url
      adds timeout=true and preserves params

LinkHelper
  #button_or_link_to
    without method assigned
      renders a link
    with get method
      renders a link
    with non-get method
      renders a form

ApplicationHelper
  #session_with_trust?
    no user present
      current path is new session path
        returns false
      current path is not new session path
        returns true
    curent user is present
      returns true

AssetHelper
  design_system_asset_path
    produces an asset path
    with leading slash
      produces an asset path

Top 10 slowest examples (0.86541 seconds, 22.5% of total time):
  AwsS3Helper #s3_presigned_url requires a bucket_prefix
    0.14981 seconds ./spec/helpers/aws_s3_helper_spec.rb:59
  LocaleHelper#with_user_locale when the user has no email_language yields the block and does not change the locale
    0.11 seconds ./spec/helpers/locale_helper_spec.rb:45
  ScriptHelper#javascript_include_tag_without_preload avoids modifying headers
    0.1023 seconds ./spec/helpers/script_helper_spec.rb:5
  ScriptHelper#render_javascript_pack_once_tags scripts enqueued local development crossorigin sources empty webpack port renders as if webpack port was unassigned
    0.10053 seconds ./spec/helpers/script_helper_spec.rb:131
  LinkHelper#button_or_link_to without method assigned renders a link
    0.092 seconds ./spec/helpers/link_helper_spec.rb:19
  ApplicationHelper#session_with_trust? no user present current path is new session path returns false
    0.06937 seconds ./spec/helpers/application_helper_spec.rb:11
  ApplicationHelper#session_with_trust? no user present current path is not new session path returns true
    0.06668 seconds ./spec/helpers/application_helper_spec.rb:21
  AssetHelper design_system_asset_path produces an asset path
    0.06389 seconds ./spec/helpers/asset_helper_spec.rb:11
  LocaleHelper#with_user_locale when the user has an email_language sets the language inside the block and yields
    0.05571 seconds ./spec/helpers/locale_helper_spec.rb:56
  ScriptHelper#render_javascript_pack_once_tags scripts enqueued with script integrity available adds integrity attribute
    0.05513 seconds ./spec/helpers/script_helper_spec.rb:96

Top 8 slowest example groups:
  AwsS3Helper
    0.06312 seconds average (0.37872 seconds / 6 examples) ./spec/helpers/aws_s3_helper_spec.rb:2
  ApplicationHelper
    0.05999 seconds average (0.17997 seconds / 3 examples) ./spec/helpers/application_helper_spec.rb:3
  LinkHelper
    0.05942 seconds average (0.17827 seconds / 3 examples) ./spec/helpers/link_helper_spec.rb:3
  LocaleHelper
    0.05925 seconds average (0.41478 seconds / 7 examples) ./spec/helpers/locale_helper_spec.rb:3
  AssetHelper
    0.05752 seconds average (0.11504 seconds / 2 examples) ./spec/helpers/asset_helper_spec.rb:3
  ScriptHelper
    0.05699 seconds average (0.62694 seconds / 11 examples) ./spec/helpers/script_helper_spec.rb:3
  GoBackHelper
    0.05415 seconds average (0.37908 seconds / 7 examples) ./spec/helpers/go_back_helper_spec.rb:3
  SessionTimeoutWarningHelper
    0.04812 seconds average (0.33685 seconds / 7 examples) ./spec/helpers/session_timeout_warning_helper_spec.rb:3

Finished in 3.85 seconds (files took 4.21 seconds to load)
46 examples, 0 failures

Randomized with seed 54538

Coverage report generated for RSpec to /home/jmax/projects/identity-idp/coverage. 2038 / 36811 LOC (5.54%) covered.
